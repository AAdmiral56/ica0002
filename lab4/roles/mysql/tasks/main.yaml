---
 - name: installing package mysql-server
   apt:
     name: mysql-server

 - name: installing package python3-pymysql
   apt:
     name: python3-pymysql

 - name: making mysql config file
   copy:
     dest: /etc/mysql/mysql.conf.d/override.cnf
     content: |
      [mysqld]
      bind-address = 0.0.0.0

 - name: MySQL database
   mysql_db:
     name: "{{ mysql_database }}"
     login_unix_socket: /var/run/mysqld/mysqld.sock
     state: present 


 - name: creating MySQL user
   mysql_user:
     name: "{{ mysql_database }}"
     password: "{{ mysql_password }}"
     priv: "{{ mysql_database }}.*:ALL"
     login_unix_socket: /var/run/mysqld/mysqld.sock
     host: "%"

 - name: restarting
   service:
     name: mysql
     state: restarted

 - name: configuring to start on boot
   service:
     name: mysql
     state: started
   become: true